<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <!--让浏览器使用最新的IE内核进行渲染页面-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--设置视口宽度等于当前设备宽度，默认缩放比为1-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <!-- 允许默认手机-->
    <meta name="toTop" content="true">
    <meta name="format-detection" content="telephone=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- 网站描述及关键词 -->
    <meta name="description" content="{content:description}" />
    <meta name="keywords" content="{content:keywords}" />
    <title>{content:title}</title>
    <!-- 字体库-->
    <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:100,300,400,500,700,900" rel="stylesheet">
    <!-- 导入Bootstrap核心CSS文件 -->
    <link href="{pboot:sitetplpath}/style/bootstrap.min.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/bootstrapValidator.min.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/animate.min.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/owl.carousel.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/owl.theme.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/style.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/index_9.css" rel="stylesheet">
    <link href="{pboot:sitetplpath}/style/base.css" rel="stylesheet">
    <!-- jquery -->
    <script src="{pboot:sitetplpath}/js/jquery.min.js"></script>
    <script src="{pboot:sitetplpath}/js/bootstrap.min.js"></script>
    <script src="{pboot:sitetplpath}/js/bootstrapValidator.min.js"></script>
    <script src="{pboot:sitetplpath}/js/owl.carousel.js"></script>
    <script src="{pboot:sitetplpath}/js/jquery.lazyload.js"></script>
    <script src="{pboot:sitetplpath}/js/wow-animate.min.js"></script>
    <script src="{pboot:sitetplpath}/js/public.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <nav class="navbar navbar-default navbar-box" role="navigation">
        <div class="container"> 
       {include file=comm/head.html}
        <div class="collapse navbar-collapse" id="example-navbar-collapse">
            <ul class="nav navbar-nav">
                 <li><a href="{pboot:sitepath}/">首页</a></li>
                <li><a href="/about/">认识杏璞</a></li>
                <li><a href="/culture/">杏璞文化</a></li>
                <li><a href="/yuer/">杏璞育儿</a></li>
                <li><a href="/team/">健康团队</a></li>
                <li><a href="/product/">杏璞产品</a></li>
                <li><a href="/news/">杏璞发布</a></li>
                <li><a href="/recruit/">人才招聘</a></li>
                <li class="active"><a href="/contact/">联系我们</a></li>
            </ul>
        </div>
        </div>
    </nav>
    <div class="container-article">
        <div class="xingpu-article">
             <div class="banner-maxWidth100">
                  <a href="" class="slide-item" style="background-image:url({sort:pic});">
                     <img class="lazy" data-original="{sort:ico}" src="{pboot:sitetplpath}/picture/lazy.gif" alt="">
                  </a>
             </div>
        </div>
    </div>
    <div class="container">
        <div class="article-title wow fadeInUp">
            <div class="center-article-position">
                <p>您的当前位置: {pboot:position separator='>'}><a href="{content:link}">导航地图</a></p>
            </div>
        </div>
        <div class="row">
          <!-- 第一排 --> 
             <div class="col-md-12 col-sm-12 col-xs-12">
                  <!-- 导航地图模块 -->
                  <div class="artcile-body-wrap contact-map" id="wrapper"></div>
                  <div id="panel" style="display: none;"></div>
                  <div id="search">
                      起点(当前定位): <input type="text" name="" id="startNode"  placeholder="您当前所在位置">
                      终点: <input type="text" name="" value="南京杏璞庄园体验馆" id="endNode">
                      <button id="btn">开始导航</button>
                  </div>
                  <script type="text/javascript" src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
                  <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=c82565d7a3959fa95321fa74cdc2a5ef&plugin=AMap.Driving,AMap.Autocomplete"></script> 
                        <script>
                        //初始化地图插件
                        window.onload = function(){
                            /*当前坐标精度*/
                            var mapObj = new AMap.Map('iCenter');
                            mapObj.plugin('AMap.Geolocation', function () {
                                  geolocation = new AMap.Geolocation({
                                      enableHighAccuracy: true,//是否使用高精度定位，默认:true
                                      timeout: 10000,          //超过10秒后停止定位，默认：无穷大
                                      maximumAge: 0,           //定位结果缓存0毫秒，默认：0
                                      convert: true,           //自动偏移坐标，偏移后的坐标为高德坐标，默认：true
                                      showButton: true,        //显示定位按钮，默认：true
                                      buttonPosition: 'LB',    //定位按钮停靠位置，默认：'LB'，左下角
                                      buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
                                      showMarker: true,        //定位成功后在定位到的位置显示点标记，默认：true
                                      showCircle: true,        //定位成功后用圆圈表示定位精度范围，默认：true
                                      panToLocation: true,     //定位成功后将定位到的位置作为地图中心点，默认：true
                                      zoomToAccuracy:true      //定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
                                  });
                                  mapObj.addControl(geolocation);
                                  geolocation.getCurrentPosition();
                                  AMap.event.addListener(geolocation, 'complete', onComplete);//返回定位信息
                                  AMap.event.addListener(geolocation, 'error', onError);      //返回定位出错信息
                            });
                            function onComplete(success){
                                document.getElementById("startNode").value = success.formattedAddress;
                                console.log(success.formattedAddress); //获取到当前准确定位
                            }
                            function onError(error){
                                console.log(error);
                            }
                            /*构造地图实例*/
                            var map = new  AMap.Map('wrapper',{
                                resizeEnable: true, //是否监控地图容器尺寸变化
                                zoom: 11,  //指定缩放级别
                                center:[118.811928, 31.976936],
                                mapStyle:'amap://styles/553b55f9850f7a8fbcda1bffe292b360'
                            });
                            var marker = new AMap.Marker({
                                title: "南京杏璞庄园生物科技有限公司",
                                position: [118.811928, 31.976936]
                            });
                            new AMap.Autocomplete({
                                input:'startNode'
                            });
                            new AMap.Autocomplete({
                                input:'endNode'
                            });
                            btn.onclick = function(){
                                map.clearMap(); //移除上次定位路线
                                /*规划路线*/
                                new AMap.Driving({
                                    map:map,
                                    panel:'panel'
                                }).search([
                                    {keyword:startNode.value,city:'南京'},
                                    {keyword:endNode.value,city:'南京'}
                                ],function(status,data){
                                    //高德地图跳转
                                    window.open("https://gaode.com/?r="+data.origin.Q+","+data.origin.R+","+data.originName+","+data.destination.Q+","+data.destination.R+","+data.destinationName,"_blank");
                                    console.log(data.destination);
                                })
                            }
                            marker.setMap(map);
                        }
                  </script>
             </div>         
        </div>       
    </div>
    <footer class="container-footer foot-wrap mag-96">
         {include file=comm/foot.html}
    </footer>
  </body>
</html>